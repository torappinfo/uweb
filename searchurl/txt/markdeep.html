<head>
  <link rel="stylesheet" href="https://morgan3d.github.io/markdeep/latest/latex.css?"><!-- Markdeep: --><style class="fallback">body{visibility:hidden}</style>
  <script src="https://morgan3d.github.io/markdeep/latest/markdeep.min.js?" charset="utf-8"></script>
  <script>
    window.addEventListener('hashchange',loadSlice);
    function absFile(url) {
      this.name=url;
      this.slice = async(offset, length) =>{
        const headers = new Headers();
        headers.append('range', 'bytes=' + offset + '-' + ( offset + length -1).toString());

        const opts = {
          credentials: 'include',
          headers    : headers
        };

        const resp = await fetch( this.name, opts );
        return await resp.arrayBuffer();
        //alert(JSON.stringify(resp.headers));
        //return await resp.text();
      }
    }
    
    var uwebfile;
    function loadSlice(){
      var page = 1;
      var blocksize = 1024;
      var extrasize = 2048;

      let lhash = location.hash;
      if(lhash)
        page = parseInt(lhash.substring(6),10);
      uwebfile.slice(blocksize*(page-1),blocksize+extrasize).then((buffer)=>{
        let u8 = new Uint8Array(buffer);
        let iStart = 0;
        if(1!=page){
          while(10!=u8[iStart]) iStart++;
        }
        let iEnd = u8.indexOf(10,blocksize);//fine newline(10)
        if(-1==iEnd) iEnd = blocksize;
        iEnd++;
        document.body.innerHTML = new TextDecoder().decode(u8.slice(iStart,iEnd));
      });

    }
    //?url=#page=
    uwebfile = new absFile(location.search.substring(5));
    loadSlice();
  </script>
</head>
<body>
<body>
